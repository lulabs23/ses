<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Sociomoov – Révision SES</title>
<style>
:root{
  --primary:#58cc02;--bg:#f7f8fa;--text:#1f2937;--card:#fff;
  --socio:#3b82f6;--eco:#ef4444;--cross:#8b5cf6;
}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto;background:var(--bg);color:var(--text)}
#app{max-width:900px;margin:40px auto;padding:24px}
h1{text-align:center;font-weight:800}
.lead{text-align:center;color:#555}
.card{background:var(--card);border-radius:20px;padding:24px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:22px}
.chapter-card{text-align:center;cursor:pointer}
.chapter-card.socio{border:3px solid var(--socio)}
.chapter-card.eco{border:3px solid var(--eco)}
.chapter-card.cross{border:3px solid var(--cross)}
button{padding:12px 18px;border-radius:999px;border:none;cursor:pointer;font-weight:600}
.btn-primary{background:var(--primary);color:#fff}
.btn-secondary{background:#fff;border:1px solid #ddd}
.progress-circle{width:110px;height:110px;margin:0 auto 14px}
input{width:100%;padding:10px;border-radius:12px;border:1px solid #ddd;margin-top:8px}
.recap-item{padding:12px;border-radius:12px;margin-bottom:10px;background:#f1f5f9}
.recap-item.ok{border-left:6px solid #16a34a}
.recap-item.ko{border-left:6px solid #dc2626}
</style>
</head>
<body>
<div id="app">
  <div class="card" style="display:flex;justify-content:space-between;align-items:center">
    <div>
      <h2 style="margin:0">Session</h2>
      <div id="lastQuiz" style="font-size:.9rem;color:#555">Aucune session</div>
    </div>
    <div id="scoreHeader" style="font-size:1.3rem;font-weight:800">0 / 0</div>
  </div>

  <h1>Réviser en s'entraînant</h1>
  <p class="lead">Choisis un chapitre pour commencer</p>
 
  <div id="chapters" class="grid"></div>
  <div id="content" style="margin-top:24px"></div>
</div>

<script>
let currentChapter=null, questionIndex=0;
let allQuestions=[], answersLog=[];
let session={success:0,total:0,last:null};
const records={};

const chapters={
  engagement:{
    number:"Chapitre 1",
    type:"socio",
    title:"Comment expliquer l'engagement politique dans les sociétés démocratiques ?",
    questions:[
      {q:"Présente les quatre formes de l'engagement politique.",expected:[["vote"],["engagement","associatif"],["militant","militantisme"],["consommation","engagée"]]},
      {q:"Explique le paradoxe de l'action collective.",expected:[["passagers","clandestins"],["absence","mobilisation"]]},
      {q:"Présente les trois raisons de l'engagement politique des individus.",expected:[["incitations","sélectives"],["rétributions","symboliques"],["structure","opportunités","politiques"]]},
      {q:"Présente les cinq variables sociodémographiques qui influencent l'engagement politique.",expected:[["csp"],["diplôme"],["âge"],["génération"],["sexe"]]},
      {q:"Explique l'évolution de l'action collective (avant 1970).",expected:[["centrée","travail"],["syndicats","ouvriers"],["partis","politiques"],["grèves","manifestations"],["vote"]]},
      {q:"Explique la diversité de l'action collective.",expected:[["objets"],["acteurs"],["répertoires"]]},
      {q:"Présente les trois objets de l'action collective.",expected:[["conflits","travail"],["luttes","minoritaires"],["nouveaux","enjeux"]]},
      {q:"Présente les quatre acteurs de l'action collective.",expected:[["partis","politiques"],["syndicats"],["associations"],["groupements","personnes"]]},
      {q:"Présente la diversité des répertoires de l'action collective.",expected:[["manifestations"],["grèves"],["actions","choc"],["pétitions"],["vote"],["non-respect","loi"]]}
    ],
    defs:{}
  },

  croissance:{
    number:"Chapitre 2",
    type:"eco",
    title:"Quels sont les sources et les défis de la croissance économique ?",
    questions:[
      {q:"Présente le processus historique de la croissance économique.",expected:[["avant","xviii"],["révolution","industrielle"],["1945","1970"],["stagnation","crises"]]},
      {q:"Comment se définit la croissance économique ?",expected:[["augmentation","durable"],["production"],["biens","services"]]},
      {q:"Par quel indicateur mesure-t-on la croissance économique ?",expected:[["pib"],["valeurs","ajoutées"]]},
      {q:"Qu’est-ce que le taux de croissance économique ?",expected:[["variation"],["pourcentage"],["pib"]]},
      {q:"Quels sont les deux facteurs de production ?",expected:[["travail"],["capital"]]},
      {q:"Quelles sont les deux sources de la croissance économique ?",expected:[["accumulation","facteurs"],["productivité","globale","facteurs"]]},
      {q:"À quoi correspond la croissance extensive ?",expected:[["augmentation"],["quantité","facteurs"]]},
      {q:"À quoi correspond la croissance intensive ?",expected:[["efficacité"],["facteurs","production"]]},
      {q:"Comment le progrès technique crée-t-il des gains de productivité ?",expected:[["innovation"],["amélioration","production"],["pgf"]]},
      {q:"Pourquoi le progrès technique est-il dit endogène ?",expected:[["investissements"],["entreprises"],["etat"]]},
      {q:"En quoi les investissements rendent-ils la croissance auto-entretenue ?",expected:[["rendements","croissants"],["innovation"],["richesse"]]},
      {q:"Quel est le rôle des institutions dans la croissance économique ?",expected:[["règles"],["confiance"],["échanges"]]},
      {q:"Pourquoi les droits de propriété incitent-ils à investir et innover ?",expected:[["sécurité"],["brevets"],["investissements"]]},
      {q:"Présente le processus de destruction créatrice.",expected:[["création"],["nouveaux","produits"],["destruction"],["obsolète"]]},
      {q:"Quel est l’impact du progrès technique sur les inégalités de revenus ?",expected:[["qualifiés"],["salaires","élevés"],["inégalités"]]},
      {q:"Quelles sont les trois principales limites écologiques de la croissance soutenable ?",expected:[["épuisement","ressources"],["pollution"],["réchauffement","climatique"]]},
      {q:"Comment l’innovation peut-elle permettre une croissance soutenable ?",expected:[["énergies","renouvelables"],["réduction","pollution"],["progrès","technique"]]}
    ],
    defs:{
      "Croissance économique":"Augmentation durable de la production de biens et de services.",
      "PIB":"Somme des valeurs ajoutées produites dans un pays.",
      "Taux de croissance économique":"Variation en pourcentage du PIB.",
      "Facteurs de production":"Travail et capital utilisés pour produire.",
      "Croissance extensive":"Croissance par augmentation de la quantité de facteurs.",
      "Croissance intensive":"Croissance par amélioration de l’efficacité des facteurs.",
      "Productivité globale des facteurs":"Efficacité combinée du travail et du capital.",
      "Progrès technique":"Amélioration des techniques de production.",
      "Gains de productivité":"Production supplémentaire sans augmenter les facteurs.",
      "Innovation":"Application d’une invention à la production.",
      "Endogène":"Lié au fonctionnement interne de l’économie.",
      "Institution":"Règles formelles et informelles encadrant les échanges.",
      "Droits de propriété":"Droits d’utiliser, modifier, vendre un bien.",
      "Croissance soutenable":"Croissance respectant les générations futures.",
      "Limites écologiques":"Contraintes environnementales à la croissance."
    }
  },

  structure:{
    number:"Chapitre 3",
    type:"socio",
    title:"Comment est structurée la société française actuelle ?",
    questions:[
      {q:"Distingue la structuration et la hiérarchisation de l’espace social.",expected:[["structuration"],["hiérarchisation"],["classement"],["inégalités"]]},
      {q:"Présente les sept facteurs qui permettent d’analyser l’espace social.",expected:[["revenu"],["diplôme"],["profession"],["âge"],["sexe"],["ménage"],["lieu","résidence"]]},
      {q:"Explique les quatre évolutions de la structure socioprofessionnelle française.",expected:[["salarisation"],["tertiairisation"],["qualification"],["féminisation"]]},
      {q:"Présente la théorie des classes sociales selon Karl Marx.",expected:[["classe","en","soi"],["classe","pour","soi"],["lutte","classes"]]},
      {q:"Présente la théorie de la stratification sociale de Max Weber.",expected:[["économique"],["social"],["politique"]]},
      {q:"Explique les différences entre les visions de Marx et Weber.",expected:[["monodimensionnelle"],["multidimensionnelle"]]},
      {q:"Quels arguments remettent en cause la pertinence des classes sociales ?",expected:[["moyennisation"],["individualisation"],["intra-classes"]]},
      {q:"Explique en quoi les classes sociales n’ont pas totalement disparu.",expected:[["inter-classes"],["élites"],["classes","populaires"]]},
      {q:"Explique la différence entre distance inter-classes et intra-classes.",expected:[["entre"],["au","sein"]]}
    ],
    defs:{
      "Espace social":"Représentation de la société à partir des positions sociales.",
      "Structuration":"Regroupement des individus selon des critères communs.",
      "Hiérarchisation":"Classement des groupes sociaux selon des inégalités.",
      "Catégorie socioprofessionnelle":"Classement statistique des professions.",
      "Structure socioprofessionnelle":"Répartition des actifs selon les CSP.",
      "Salarisation":"Hausse de la part des salariés.",
      "Tertiarisation":"Hausse du secteur des services.",
      "Qualification":"Niveau de compétences ou de diplôme.",
      "Féminisation":"Augmentation de la part des femmes dans l’emploi.",
      "Classes sociales":"Groupes hiérarchisés partageant des caractéristiques communes.",
      "Stratification sociale":"Hiérarchie sociale multidimensionnelle.",
      "Distance inter-classes":"Écarts entre groupes sociaux.",
      "Distance intra-classes":"Écarts au sein d’un même groupe.",
      "Individualisation":"Affaiblissement des appartenances collectives.",
      "Identification subjective":"Sentiment d’appartenance à un groupe.",
      "Rapports sociaux de genre":"Inégalités construites entre hommes et femmes."
    }
  },

  commerce:{number:"Chapitre 4",type:"eco",title:"Quels sont les fondements du commerce international ?",questions:[],defs:{}},
  mobilite:{number:"Chapitre 5",type:"socio",title:"Quels sont les facteurs de la mobilité sociale ?",questions:[],defs:{}},
  chomage:{number:"Chapitre 6",type:"eco",title:"Comment lutter contre le chômage ?",questions:[],defs:{}},
  travail:{number:"Chapitre 7",type:"socio",title:"Quelles mutations du travail et de l’emploi ?",questions:[],defs:{}},
  europe:{number:"Chapitre 8",type:"eco",title:"Quelles politiques économiques dans le cadre européen ?",questions:[],defs:{}},
  environnement:{number:"Chapitre 9",type:"cross",title:"Quelle action publique pour l’environnement ?",questions:[],defs:{}}
};

Object.keys(chapters).forEach(k=>records[k]={best:0});

const chaptersDiv=document.getElementById('chapters');
window.addEventListener('DOMContentLoaded',renderChapters);

function renderChapters(){
  chaptersDiv.innerHTML='';
  Object.keys(chapters).forEach(id=>{
    const c=chapters[id];
    const total=c.questions.length;
    const best=records[id].best;
    const percent=total?Math.round((best/total)*100):0;
    const card=document.createElement('div');
    card.className=`card chapter-card ${c.type}`;
    card.innerHTML=`<svg class="progress-circle" viewBox="0 0 36 36"><path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#e5e7eb" stroke-width="4"/><path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#58cc02" stroke-width="4" stroke-dasharray="${percent},100"/><text x="18" y="20.5" text-anchor="middle" font-size="8">${best}/${total}</text></svg><h3>${c.number}</h3><p>${c.title}</p>`;
    card.onclick=()=>startChapter(id);
    chaptersDiv.appendChild(card);
  });
}

function startChapter(id){currentChapter=id;questionIndex=0;allQuestions=[...chapters[id].questions];answersLog=[];session={success:0,total:0,last:null};chaptersDiv.style.display='none';showQuestion();}

function showQuestion(){const c=document.getElementById('content');c.innerHTML='';if(questionIndex>=allQuestions.length){endSession();return;}const q=allQuestions[questionIndex];const card=document.createElement('div');card.className='card';card.innerHTML=`<h3>${q.q}</h3>`;q.expected.forEach(()=>card.innerHTML+=`<input placeholder="Réponse" />`);card.innerHTML+=`<div style="display:flex;gap:12px;margin-top:16px"><button class="btn-primary" onclick="validateQuestion()">Valider</button><button class="btn-secondary" onclick="skipQuestion()">Passer</button></div>`;c.appendChild(card);}

function validateQuestion(){const q=allQuestions[questionIndex];const inputs=[...document.querySelectorAll('#content input')].map(i=>i.value.toLowerCase());let used=Array(q.expected.length).fill(false);let ok=true;inputs.forEach(v=>{let found=false;q.expected.forEach((keys,i)=>{if(!used[i]&&keys.some(k=>v.includes(k))){used[i]=true;found=true;}});if(!found)ok=false;});if(used.some(u=>!u))ok=false;session.total++;if(ok)session.success++;answersLog.push({question:q.q,correct:ok,expected:q.expected});session.last=Date.now();updateHeader();questionIndex++;showQuestion();}

function skipQuestion(){session.total++;answersLog.push({question:allQuestions[questionIndex].q,correct:false,expected:allQuestions[questionIndex].expected});updateHeader();questionIndex++;showQuestion();}

function endSession(){if(session.success>records[currentChapter].best){records[currentChapter].best=session.success;}renderChapters();const total=session.total;const percent=total?Math.round((session.success/total)*100):0;const c=document.getElementById('content');c.innerHTML=`<div class="card" style="text-align:center"><svg class="progress-circle" viewBox="0 0 36 36"><path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#e5e7eb" stroke-width="4"/><path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#58cc02" stroke-width="4" stroke-dasharray="${percent},100"/><text x="18" y="20.5" text-anchor="middle" font-size="8">${session.success}/${total}</text></svg><h2>Récapitulatif de la session</h2><p>${session.success} bonne(s) réponse(s) sur ${total}</p></div>`;answersLog.forEach(a=>{const div=document.createElement('div');div.className='recap-item '+(a.correct?'ok':'ko');let html=`${a.correct?'☑️':'❌'} ${a.question}`;if(!a.correct){const readable=a.expected.map(e=>e.join(' ')).join(', ');html+=`<br><small><strong>Réponses attendues :</strong> ${readable}</small>`;}div.innerHTML=html;c.appendChild(div);});const btn=document.createElement('button');btn.className='btn-primary';btn.style.marginTop='20px';btn.textContent='Retour à l’accueil';btn.onclick=back;c.appendChild(btn);}

function updateHeader(){document.getElementById('scoreHeader').textContent=`${session.success} / ${session.total}`;document.getElementById('lastQuiz').textContent=session.last?'Dernière session : '+new Date(session.last).toLocaleString():'Session en cours';}
function back(){document.getElementById('content').innerHTML='';chaptersDiv.style.display='grid';renderChapters();}

console.assert(chapters.structure.questions.length>0,'Questions chapitre 3 absentes');
console.assert(chapters.croissance.questions.length>0,'Questions chapitre 2 absentes');
console.assert(typeof showQuestion==='function','showQuestion manquant');
console.assert(typeof validateQuestion==='function','validateQuestion manquant');
</script>
</body>
</html>
